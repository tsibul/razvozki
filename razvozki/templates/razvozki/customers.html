<!doctype html>
{% load static %}
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Клиенты</title>
</head>
{% include 'razvozki/main.html' %}

<body>
<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1" class="btn btn-outline-success">&laquo; первая</a>
            <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-success">предыдущая</a>
        {% endif %}

        <span class="current btn btn-outline-secondary">
            страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-success">следующая</a>
            <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-outline-success">последняя &raquo;</a>
        {% endif %}
    </span>
</div>
<br>

<div class="container px-1">
  <div class="row bg-success" style="--bs-bg-opacity: .3;" >
    <div class="col-1 text-center fw-bold" >Добавить</div>
    <div class="col-2 text-center fw-bold">Клиент</div>
    <div class="col text-center fw-bold" >Адрес</div>
    <div class="col text-center fw-bold">Контакт</div>
    <div class="col text-center fw-bold">Координата</div>
    <div class="col-1 text-center fw-bold">Удалить</div>
  </div>
</div>
<form action="addrecord_cst/" method="post">
{% csrf_token %}
<div class="container px-1" id="new_ln" style="display:none">
  <div class="row ">
    <div class="col-1 text-center"><a href="javascript:add_ln_reverse('new_ln')"><i class="bi bi-x-circle-fill" style="color:red" data-toggle="tooltip" data-placement="top" title="отменить"></i></a></div>
    <div class="col-2 text-center"><input type="text" class="form-control" id="customer_name" placeholder="Клиент" name="name"></div>
      <div class="col text-center"><textarea type="text" class="form-control" id="address" placeholder="Адрес" name="address"></textarea></div>
      <div class="col text-center"><textarea type="text" class="form-control" id="contact" placeholder="Контакт" name="contact"></textarea></div>
    <div class="col text-center"><input type="text" class="form-control" id="mappoint" placeholder="Координата" name="mappoint"></div>
    <div class="col-1 text-center"><button type="submit" class="bi bi-check-circle-fill" style="color:green; background-color:white; border-style:none" data-toggle="tooltip" data-placement="top" title="записать"></button></div>
  </div>
</div>
</form>
{% for cst in page_obj %}
<div class="container px-1" id="cst_id_{{cst.id}}">
  <div class="row ">
    <div class="col-1 text-center"><a href="javascript:add_ln('new_ln')"><i class="bi bi-plus-circle-fill" style="color:green" data-toggle="tooltip" data-placement="top" title="добавить клиента"></i></a></div>
    <div class="col-2 border border-1"><a class=" {{cst.clr}}" href="javascript:upd_ln({{cst.id}});">{{cst.name}}</a> </div>
    <div class="col border border-1"><a class=" {{cst.clr}}" href="javascript:upd_ln({{cst.id}});">{{cst.address}}</a></div>
    <div class="col border border-1"><a class=" {{cst.clr}}" href="javascript:upd_ln({{cst.id}});">{{cst.contact}}</a></div>
    <div class="col border border-1"><a class=" {{cst.clr}}" href="javascript:upd_ln({{cst.id}});">{{cst.mappoint}}</a></div>
    <div class="col-1 border border-1 text-center"><a href="delete_cst/{{ cst.id }}"><i class="bi bi-x-circle-fill" style="color:red" data-toggle="tooltip" data-placement="top" title="удалить клиента"></i></a></div>
  </div>
</div>
<form action="updaterecord_cst/{{ cst.id }}" method="post">
{% csrf_token %}
<div class="container px-1"  id="cst_id2_{{cst.id}}" style="display:none">
  <div class="row">
    <div class="col-1 text-center"><a href="javascript:upd_ln_reverse({{cst.id}});"><i class="bi bi-x-circle-fill" style="color:red" data-toggle="tooltip" data-placement="top" title="отменить"></i></a></div>
    <div class="col-2 border border-1" ><input type="text" class="form-control {{cst.clr}}" placeholder="Клиент" name="cst_name" value="{{ cst.name }}"></div>
      <div class="col border border-1"><textarea type="text" class="form-control {{cst.clr}}"  placeholder="Адрес" name="address" value="{{cst.address}}"></textarea></div>
    <div class="col border border-1"><textarea type="text" class="form-control {{cst.clr}}"  placeholder="Контакт" name="contact" value="{{cst.contact}}"></textarea></div>
    <div class="col border border-1"><input type="text" class="form-control {{cst.clr}}"  placeholder="Координата" name="mappoint" value="{{cst.mappoint}}"></div>
    <div class="col-1 border border-1 text-center"><button type="submit" class="bi bi-check-circle-fill" style="color:green; background-color:white; border-style:none" data-toggle="tooltip" data-placement="top" title="записать"></button></a></div>
  </div>
</div>
</form>
{% endfor %}
<br>
<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1" class="btn btn-outline-success">&laquo; первая</a>
            <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-success">предыдущая</a>
        {% endif %}

        <span class="current btn btn-outline-secondary">
            страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-success">следующая</a>
            <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-outline-success">последняя &raquo;</a>
        {% endif %}
    </span>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="{% static 'razvozki/rzv.js' %}"></script>
</body>
</html>